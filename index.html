<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Indexor</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- <link href="css/style.css" rel="stylesheet"> -->
        <!-- <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> -->
        <script id="MathJax-script" src="tex-mml-svg.js"></script>
        <script src="chevrotain.min.js"></script>
    </head>
    <body>
      <div>
        <details open>
        <summary>Instructions</summary>
          <ul id="instructions_list">
            <li>Input is LaTeX-like (see example), some commands allowed</li>
            <li>Identifiers ("tensors" and indices) can be sequences of letter from a to z (lower- or uppercase)</li>
            <li>Indices must be separated by spaces</li>
            <li>Only operators supported are + and -, no fractions</li>
            <li>Multiplication is implicit</li>
            <li>No indices after parentheses</li>
            <li>Sub-/supercript are written with _{indices} and ^{indices}, <i>in that order</i></li>
            <li>LaTeX commands can be used in the replacement rule (\alpha, etc.)
          </ul>
        </details>
        <p>Input:
        <input type="text" id="input" size=100 value="R_{j l;k i}-R_{j k,l i}-R_{i l;k j}+R_{i k;l j}+g^{p q}(R_{p j k l}R_{q i}+R_{i p k l}R_{q j})"></p>

        <div>
        <div id="tex">-</div>
        </div>

        <div class="hidden">
        Covariant indices: <ul id="cov"></ul>
        </div>

        <div class="hidden">
        Contravariant indices: <ul id="contra"></ul>
        </div>

        <div class="hidden">
        Einstein sum indices: <ul id="ein"></ul>
        </div>

        <div class="hidden">
            <h3>Errors</h3>
            <ul id="errors"></ul>
        </div>

        <div>
        <div id="replaced_tex">-</div>
        </div>

    <style>
    body { font-size: 1.2em; font-family: sans; }
    input { font-size: 1.0em; border: none; background-color: #eee; }
    p { margin-top: 1em; }
    .replace_value { padding: 0.2em; padding-left: 0.5em;}
    .replace_target { text-align: right; display: inline-block; width: 3em; margin-right: 0.5em;}
    li { margin-bottom: 0.2em; }
    .hidden { display: none; }
    #input { padding: 0.5em; }
    ul { list-style: none; }
    ul#instructions_list { list-style: circle; font-size: 0.8em; }
    </style>
    

  <script>
  MathJax = {
    startup: {
      ready: () => {
        MathJax.startup.defaultReady();
        MathJax.startup.promise.then(() => {
          bootstrap();
        });
      }
    },
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']]
    },
    svg: {
      fontCache: 'global'
    }
  };
  </script>
    <script id="MathJax-script" src="tex-mml-svg.js" async></script>
    <script src="indexor.js"></script>
    <script src="main.js"></script>
    </body>
</html>
